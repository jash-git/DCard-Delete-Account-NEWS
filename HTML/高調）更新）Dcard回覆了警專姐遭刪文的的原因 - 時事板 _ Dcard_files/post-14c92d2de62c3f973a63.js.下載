(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5086],{73989:function(e,t,o){"use strict";function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}o.d(t,{Z:function(){return n}})},63409:function(e,t,o){"use strict";function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}o.d(t,{Z:function(){return c}});var r=o(90929),i=o(73989);function s(e,t){return!t||"object"!==(0,r.Z)(t)&&"function"!==typeof t?(0,i.Z)(e):t}function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=n(e);if(t){var i=n(this).constructor;o=Reflect.construct(r,arguments,i)}else o=r.apply(this,arguments);return s(this,o)}}},48699:function(e,t,o){"use strict";o.d(t,{Z:function(){return c}});var n=o(66700),r=o(19785);function i(e,t){(0,r.Z)(2,arguments);var o=(0,n.Z)(e),i=(0,n.Z)(t);return o.getFullYear()-i.getFullYear()}var s=o(2463);function c(e,t){(0,r.Z)(2,arguments);var o=(0,n.Z)(e),c=(0,n.Z)(t),d=(0,s.Z)(o,c),a=Math.abs(i(o,c));o.setFullYear(1584),c.setFullYear(1584);var u=(0,s.Z)(o,c)===-d,f=d*(a-Number(u));return 0===f?0:f}},5809:function(e){var t=Math.floor,o=Math.random;e.exports=function(e,n){return e+t(o()*(n-e+1))}},4742:function(e,t,o){var n=o(5809);e.exports=function(e){var t=e.length;return t?e[n(0,t-1)]:void 0}},63407:function(e,t,o){"use strict";o.d(t,{Z:function(){return O}});var n=o(77162),r=o.n(n),i=o(11720),s=o(56470),c=o(52322),d=o(25237),a=o(2784),u=o(97488),f=o(68119),l=o(11200),p=o(5431),m=o(86761),g=o(36156),b=o(49814),h=o(55219),v=o(66811),x=o(51119),Z=o(59394),k=o(13888),C=o.n(k),y=o(30898),_=o.n(y),D=o(17335),w=o.n(D),P=o(73555),M=o(60910),j=o(76536),I=o(14495),F=o(33102),E=(0,o(77768).ZP)(),R=((0,P.FZ)(M.l.GET_AD_UNIT,(function(e,t){var o=t.adUnitId;return j.Z.get(e,"/dad/v0/units/".concat(o))}),{requestOnIdle:!0}),E.isEnvProd?{"558bae61-cb3c-4604-b281-473b6bf1047d":[{provider:"google",id:"/146730420/Desktop-Right-Top"}],"f0fc1371-7da6-472b-be89-6392f8869ea4":[{provider:"google",id:"/146730420/Desktop-Beyond-FB"}],"2ff05f32-46b1-480c-9a6d-6ccbe55b7699":[{provider:"google",id:"/146730420/Desktop-Right3"}],"a0d23a73-66bb-4704-af18-286c6b0292f9":[{provider:"google",id:"/146730420/Desktop-Right4"}],"63463c6f-e951-4d18-b559-6e6c5e629ec3":[{provider:"google",id:"/146730420/Desktop-RightBottom-Bottom"}],"e7b65598-5ac3-4c4e-83e5-255e6f68ad2a":[{provider:"google",id:"/146730420/Desktop-Article-Bottom"}],"d1555d99-c344-499a-b0ee-fadfa2f2b216":[{provider:"google",id:"/146730420/Desktop-Comments"}],"e4d31040-b6b8-4479-9585-a28bd1c16832":[{provider:"google",id:"/146730420/Mobile-Web-Screen-Top"}],"0c24cee5-97e0-486b-9dc1-b7d36bea93cb":[{provider:"google",id:"/146730420/Mobile-Web-Article-End"}],"49317a19-f96f-42df-9dee-76bf1d62b6f9":[{provider:"google",id:"/146730420/Mweb-Popular-Comments"}],"b29a047c-6238-449a-8355-2b5651ebe5b1":[{provider:"google",id:"/146730420/Mweb-Comments"}],"88647537-2142-4839-88d4-780a6b7bf0e4":[{provider:"google",id:"/146730420/Mobile-Web-Screen-Bottom"}],"63034007-a933-46ae-81cc-a9dce1a2552d":[{provider:"google",id:"/146730420/Dtto-Desktop-Right-1st"}],"54cf0302-f980-4dd4-8c7c-2ff9f35814e1":[{provider:"google",id:"/146730420/Dtto-Desktop-Right-2nd"}],"ee599045-c028-478a-9a86-72ea8360116e":[{provider:"google",id:"/146730420/Dtto-Desktop-Right-3rd"}],"765edf71-161b-4156-9cf5-09a9bbe761b7":[{provider:"google",id:"/146730420/Dtto-Mobile-Post-Bottom"}],"25bbf134-6c3c-4eac-8e00-0f922cff0434":[{provider:"google",id:"/146730420/Desktop-1x1-Custom-1"}],"6a22a168-984d-4347-bd30-4a6caa25fff7":[{provider:"google",id:"/146730420/Desktop-Post-Feed-Native"}],"2d81240e-5833-4395-b2f7-854b5966173c":[{provider:"google",id:"/146730420/Mobile-Post-Feed-Native"}],"943f7a58-e434-407f-9e79-a95dbcfd4549":[{provider:"google",id:"/146730420/Desktop-Darsys-Item-Native"}]}:{"428fd4f4-0904-40a5-bd8d-3fa3890661dc":[{provider:"google",id:"/146730420/Desktop-Right-Top"}],"e9d6380a-79cf-4d2d-85da-dfcbaf3e0559":[{provider:"google",id:"/146730420/Desktop-Beyond-FB"}],"3d716f04-4b40-4977-ae5e-e71f73d31fab":[{provider:"google",id:"/146730420/Desktop-Right3"}],"2ac20cf3-e90b-4261-8661-642bc1366c9d":[{provider:"google",id:"/146730420/Desktop-Right4"}],"2b3e3e60-76cf-495f-9473-9ce435b6dd56":[{provider:"google",id:"/146730420/Desktop-RightBottom-Bottom"}],"276358bc-1507-475c-8255-090c17a11f70":[{provider:"google",id:"/146730420/Desktop-Article-Bottom"}],"9e8c9e0a-76ee-4f5c-a459-f87265bf24a7":[{provider:"google",id:"/146730420/Desktop-Comments"}],"4a661e99-6b17-4e82-b347-0e8d8ba4769f":[{provider:"google",id:"/146730420/Mobile-Web-Screen-Top"}],"04b5806d-f319-496c-bb35-304563d4b6f0":[{provider:"google",id:"/146730420/Mobile-Web-Article-End"}],"0cca43cd-69be-43d2-b6f8-b0fa9206b475":[{provider:"google",id:"/146730420/Mweb-Popular-Comments"}],"bd91cd0a-1df5-4dd6-a95b-fa37e97199b5":[{provider:"google",id:"/146730420/Mweb-Comments"}],"09a033df-0da1-4c27-8faa-9c649189fe16":[{provider:"google",id:"/146730420/Mobile-Web-Screen-Bottom"}],"4e6e0462-c37e-4d89-804d-3443b4435ccb":[{provider:"google",id:"/146730420/Dtto-Desktop-Right-1st"}],"95027f85-08be-4b0b-807c-868c28875c0e":[{provider:"google",id:"/146730420/Dtto-Desktop-Right-2nd"}],"2214acfb-d444-47ab-8a53-bd026c8b35a1":[{provider:"google",id:"/146730420/Dtto-Desktop-Right-3rd"}],"4c7f6035-5e8f-41b0-a238-a08d90ecdc43":[{provider:"google",id:"/146730420/Dtto-Mobile-Post-Bottom"}],"73cae917-2497-41e7-8c32-abe225086d1b":[{provider:"google",id:"/146730420/Desktop-1x1-Custom-1"}],"85a36939-7ebd-4456-a599-803d9fe6bcab":[{provider:"google",id:"/146730420/Desktop-Post-Feed-Native"}],"47f7fc08-2b2e-46a0-ad0c-75a161c22eb6":[{provider:"google",id:"/146730420/Mobile-Post-Feed-Native"}],"7646ab0e-d3c0-44a9-9ce4-0d2cb5844d28":[{provider:"google",id:"/146730420/Desktop-Darsys-Item-Native"}]}),S=(0,P.FZ)(M.l.LIST_AD_ITEM_BATCH,(function(e,t){var o=t.isMobile?[F.C[F.Y.MobileArticleTop],F.C[F.Y.MobileArticleBottom],F.C[F.Y.MobilePopularCommentsBottom],F.C[F.Y.MobileLatestCommentsMiddle],F.C[F.Y.MobileLatestCommentsBottom],F.C[F.Y.MobileNativePostFeed]]:[F.C[F.Y.DesktopRight1],F.C[F.Y.DesktopRight2],F.C[F.Y.DesktopRight3],F.C[F.Y.DesktopRight4],F.C[F.Y.DesktopRight5],F.C[F.Y.DesktopArticleBottom],F.C[F.Y.DesktopLatestCommentsMiddle],F.C[F.Y.DesktopNativePostFeed],F.C[F.Y.DesktopNativeDarsysItem]],n=e.getState().adItem.data,r=Object.keys(n),i=w()(o,r),s=_()(o,i);if(i.length<=0)return C()(r,o);var c=function(){return Promise.resolve(Object.keys(R).reduce((function(e,t){return(0,Z.Z)((0,Z.Z)({},e),{},(0,x.Z)({},t,{list:R[t]||[]}))}),{}))};return c().then((function(e){var t=Object.keys(e||{}).reduce((function(t,o){var n;return(0,Z.Z)((0,Z.Z)({},t),{},(0,x.Z)({},(0,I.CN)({adUnitId:o}),null===e||void 0===e||null===(n=e[o])||void 0===n?void 0:n.list))}),{});return(0,Z.Z)((0,Z.Z)((0,Z.Z)({},i.reduce((function(e,t){return(0,Z.Z)((0,Z.Z)({},e),{},(0,x.Z)({},t,[]))}),{})),C()(r,s)),t)}))}),{requestOnIdle:!0}),T=(0,d.default)((function(){return o.e(2336).then(o.bind(o,12336))}),{loadableGenerated:{webpack:function(){return[12336]},modules:["../layouts/ForumLayout/ForumLayout.tsx -> ./DesktopForumLayout"]}}),B=(0,d.default)((function(){return o.e(3878).then(o.bind(o,73878))}),{loadableGenerated:{webpack:function(){return[73878]},modules:["../layouts/ForumLayout/ForumLayout.tsx -> ./MobileForumLayout"]}}),N=function(e){var t=e.children,o=(0,v.I0)(),n=(0,b.Z)(h.Hu);return(0,a.useEffect)((function(){n||o((0,u.PC)())}),[o,n]),n?(0,c.jsx)(B,{children:t}):(0,c.jsx)(T,{children:t})};N.getInitialProps=function(){var e=(0,s.Z)(r().mark((function e(t){var o,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.store,t.query,n=t.isMobile,e.next=3,Promise.all([o.dispatch((0,l.s)([].concat((0,i.Z)(n?[p.y.MobileWebCampaigns]:[p.y.DesktopWebAdRefreshTTLSec,p.y.DesktopWebAdDarsysNative]),[p.y.HotCommentsHiddenPostAuthors,p.y.NormalForumCommentHoverExperiment]))),o.dispatch(S({isMobile:n})),o.dispatch((0,f.t)())]);case 3:return e.abrupt("return",{});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var O=(0,m.X)(g.Z)(N)},58234:function(e,t,o){"use strict";var n=o(2784).createContext({openCommentEditor:!1,setOpenCommentEditor:function(){},setEditComment:function(){},isFullScreen:!1,setIsFullScreen:function(){}});t.Z=n},58977:function(e,t,o){"use strict";o.d(t,{Z:function(){return O}});var n=o(52322),r=o(55219),i=o(69176),s=o(90836),c=o(49814),d=o(97052),a=o(34149),u=o(5825),f=o.n(u),l=o(83112),p=o(78839),m=a.ZP.div.withConfig({componentId:"sc-1q8kr9f-0"})(["display:flex;align-items:center;justify-content:center;padding:120px 0;",";"],(function(e){return e.theme.isMobile&&(0,a.iv)(["min-height:calc(100vh - ","px);height:100%;padding:0;background-color:",";"],(function(e){return e.theme.HEADER_HEIGHT}),(function(e){return e.theme.uiForeground1}))})),g=a.ZP.div.withConfig({componentId:"sc-1q8kr9f-1"})(["display:flex;align-items:center;flex-direction:column;max-width:280px;"]),b=a.ZP.img.withConfig({componentId:"sc-1q8kr9f-2"})(["width:100%;"]),h=a.ZP.h3.withConfig({componentId:"sc-1q8kr9f-3"})(["",";margin:16px 0 12px;"],(function(e){return e.theme.subtitle1})),v=a.ZP.div.withConfig({componentId:"sc-1q8kr9f-4"})(["",";max-width:200px;text-align:center;color:",";"],(function(e){return e.theme.body2}),(function(e){return e.theme.textDefault})),x=(0,a.ZP)(p.Qj).withConfig({componentId:"sc-1q8kr9f-5"})(["margin-top:16px;"]);function Z(){var e=(0,l.Z)().formatMessage;return(0,n.jsx)(m,{children:(0,n.jsxs)(g,{children:[(0,n.jsx)(b,{src:f()}),(0,n.jsx)(h,{children:e({id:"post.forbidden.title"})}),(0,n.jsx)(v,{children:e({id:"post.forbidden.message"})}),(0,n.jsx)(x,{to:"/f",children:e({id:"post.browse.action"})})]})})}var k=o(34291),C=o.n(k),y=o(66811),_=o(11120).Z,D=o(58234),w=o(99898);function P(){var e=(0,y.I0)();return(0,n.jsx)(D.Z.Provider,{value:{openCommentEditor:!1,setOpenCommentEditor:function(){e(w.M.actions.push({type:w.G.NotLogin}))},setEditComment:C(),isFullScreen:!1,setIsFullScreen:C()},children:(0,n.jsx)(_,{})})}var M=o(25237),j=o(2784),I=o(27753),F=o(48203),E=o(4126),R=o(56267),S=o(20859),T=o(76253),B=(0,M.default)((function(){return Promise.resolve().then(o.bind(o,51353))}),{ssr:!1,loadableGenerated:{webpack:function(){return[51353]},modules:["../modules/post/components/PostViewWithCommentEditor.tsx -> ~/modules/modal/components/WIPConfirm"]}});function N(){var e=(0,l.Z)().formatMessage,t=(0,c.Z)(r.Hu),o=(0,c.Z)(r.TP),d=(0,s.Z)(),a=(0,c.Z)((function(e){return(0,i.pm)(e,d)})),u=(0,c.Z)((function(e){return(0,I.sh)(e,a?a.forumAlias:"")})),f=(0,c.Z)(F.np),p=(0,j.useState)(!1),m=p[0],g=p[1],b=(0,j.useState)(),h=b[0],v=b[1],x=(0,j.useState)(!1),Z=x[0],k=x[1],C=(0,j.useState)(!1),y=C[0],w=C[1],P=(0,E.Z)(null===a||void 0===a?void 0:a.forumAlias);return(0,j.useEffect)((function(){g(!1)}),[d]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(D.Z.Provider,{value:{openCommentEditor:m,setOpenCommentEditor:function(o){if(t)return k(!0);if(!P(R.XP.canComment)){var n=function(){if(f&&f.id&&u&&a)return"M"===f.gender&&"girl"===a.forumAlias?e({id:"comment.validation_boy_comment_girl_forum_invalid.message"}):"F"===f.gender&&"boy"===a.forumAlias?e({id:"comment.validation_girl_comment_boy_forum_invalid.message"}):u.isSchool&&!u.userSchool?e({id:"comment_error.is_not_user_school.message"}):f.canUseSchool||u.canUseNickname||a.currentMember?void 0:e({id:"comment.forbidden_on_forum.message_format"},{forumName:u.name})}();n?T.Z.show({element:n,intent:S.SE.danger}):(o||v(void 0),g(o))}},editComment:h,setEditComment:v,isFullScreen:y,setIsFullScreen:w},children:(0,n.jsx)(_,{})}),(0,n.jsx)(B,{isOpen:Z,title:e({id:"comment.wip.title"}),description:e({id:"comment.wip.description_format"},{product:o}),onClose:function(){return k(!1)}})]})}function O(){var e=(0,c.Z)(r.cm),t=(0,s.Z)(),o=(0,c.Z)((function(e){return(0,i.wD)(e,t)})),a=(0,c.Z)((function(e){return(0,i.uB)(e,t)})),u=(0,c.Z)(r.Hu);return a?(0,n.jsx)(d.Z,{error:a}):o?(0,n.jsx)(Z,{}):e||u?(0,n.jsx)(N,{}):(0,n.jsx)(P,{})}},97052:function(e,t,o){"use strict";o.d(t,{s:function(){return h},Z:function(){return v}});var n=o(52322),r=o(34149),i=o(77106),s=o(5825),c=o.n(s),d=o(49814),a=o(43248),u=o(83112),f=o(55219),l=r.ZP.div.withConfig({componentId:"sc-7mzcsk-0"})(["display:flex;flex-direction:column;align-items:center;text-align:center;padding:50px 0;background-color:",";border-radius:4px 4px 0 0;flex:1;"],(function(e){return e.theme.uiForeground1})),p=r.ZP.img.withConfig({componentId:"sc-7mzcsk-1"})(["display:block;width:100%;max-width:400px;margin-bottom:30px;"]),m=r.ZP.h1.withConfig({componentId:"sc-7mzcsk-2"})(["font-size:30px;font-weight:400;line-height:42px;margin-bottom:10px;"]),g=r.ZP.p.withConfig({componentId:"sc-7mzcsk-3"})(["color:",";font-size:18px;line-height:30px;max-width:45%;"],(function(e){return e.theme.textLightMedium})),b=r.ZP.a.withConfig({componentId:"sc-7mzcsk-4"})(["cursor:pointer;"]);function h(e,t,o){return e.reasonText?"accused"===e.reason?(0,n.jsxs)(n.Fragment,{children:[t({id:"post.removed_reason.message_format"},{reasonText:e.reasonText}),(0,n.jsx)("br",{}),t({id:"post.delete_policy.description_format"},{a:function(e){return(0,n.jsx)("a",{href:"https://about.dcard.tw/faq/posts/38",target:"_blank",rel:"noopener noreferrer",children:e})},product:o})]}):t({id:"post.removed_reason.message_format"},{reasonText:e.reasonText}):""===e.reasonText?t({id:"post.deleted_by_author.message"}):t({id:"post.not_found.description"})}function v(e){var t=e.error,o=(0,u.Z)().formatMessage,r=(0,d.Z)((function(e){return e.app.data.isFirstLoad})),s=(0,d.Z)(f.TP),v=(0,a.Z)(),x=h(t,o,s);return(0,n.jsxs)(l,{children:[(0,n.jsx)(p,{src:c()}),(0,n.jsx)(m,{children:o({id:"post.post_not_found.title"})}),(0,n.jsxs)(g,{children:[x,(0,n.jsx)("br",{}),r?(0,n.jsx)(i.Z,{to:"/f",children:o({id:"post.post_not_found.action"})}):(0,n.jsx)(b,{onClick:v.back,children:o({id:"general.go_back.action"})})," ",o({id:"post.post_not_found_go_back.description"})]})]})}},50653:function(e,t,o){"use strict";o.r(t);var n=o(77162),r=o.n(n),i=o(85354),s=o(56470),c=o(52322),d=o(59394),a=o(56974),u=o.n(a),f=o(25237),l=o(2784),p=o(86761),m=o(63407),g=o(58977),b=o(64330),h=o(89509),v=o(69176),x=o(37672),Z=o(95652),k=o(66811),C=o(49814),y=o(55219),_=o(43248),D=o(97488),w=(0,f.default)((function(){return o.e(5212).then(o.bind(o,5212))}),{ssr:!1,loadableGenerated:{webpack:function(){return[5212]},modules:["post.tsx -> ~/modules/common/components/RegulationConfirmRegister"]}}),P=function(e){var t,o=e.postId,n=(0,k.I0)(),r=(0,_.Z)().query,i=r.forumAlias,s=(0,C.Z)(y.Hu),a=(0,C.Z)((function(e){return(0,x.d5)(e,(0,x.Mo)({postId:o||""}))}));(0,l.useEffect)((function(){var e,t,i=+(null!==(e=null===(t=u()(a.index))||void 0===t?void 0:t.split("-")[1])&&void 0!==e?e:0),s=+(r.newCommentCount||0),c=+(r.newCommentOffsetFloor||0)+s-1,f=Math.min(Math.max(c-i,s),100);o&&f&&s&&i===c-s&&n((0,h.nQ)((0,d.Z)({postId:o,limit:f},i?{after:i}:{after:"0"})))}),[a.index,r.newCommentCount,r.newCommentOffsetFloor,n,o]),(0,l.useEffect)((function(){s&&i&&"all"!==i&&n((0,D.iC)({alias:i}))}),[i,n,s]);var f=null===(t=(0,C.Z)((function(e){return(0,v.pm)(e,o)})))||void 0===t?void 0:t.nsfw;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(w,{nsfw:f}),(0,c.jsx)(g.Z,{})]})};P.getInitialProps=function(){var e=(0,s.Z)(r().mark((function e(t){var o,n,s,c,d,a,u,f,l,p,m,g,v;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.store,n=t.query,s=t.res,c=n.postId,d=(0,Z.Z)(c),[o.dispatch((0,b.Fz)({id:d,read:!0})),o.dispatch((0,h.nQ)({postId:d,popular:!0})),o.dispatch((0,h.nQ)({postId:d,limit:50}))],e.next=13;break;case 7:a=e.sent,u=(0,i.Z)(a,1),f=(0,i.Z)(u[0],1),l=f[0],!(p=void 0===l?{}:l).ok&&s&&(s.statusCode=null!==(m=null===(g=p.meta)||void 0===g||null===(v=g.rawError)||void 0===v?void 0:v.status)&&void 0!==m?m:500);case 13:return e.abrupt("return",{postId:d});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.default=(0,p.X)(m.Z)(P)},27221:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post",function(){return o(50653)}])},91008:function(e,t,o){"use strict";o.d(t,{x:function(){return i}});var n=o(2995),r=o(91881);function i(e,t){return function(o){return o.lift(new s(e,t))}}var s=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.compare,this.keySelector))},e}(),c=function(e){function t(t,o,n){var r=e.call(this,t)||this;return r.keySelector=n,r.hasKey=!1,"function"===typeof o&&(r.compare=o),r}return n.ZT(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t;try{var o=this.keySelector;t=o?o(e):e}catch(r){return this.destination.error(r)}var n=!1;if(this.hasKey)try{n=(0,this.compare)(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))},t}(r.L)},5825:function(e){e.exports="/_next/static/media/image_empty_light_postlost-f22e8105ffddaf69ad86afd978cc1cd3.svg"}},function(e){e.O(0,[9351,3021,2659,7606,3584,6118,4990,186,1120,9774,2888,179],(function(){return t=27221,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=post-14c92d2de62c3f973a63.js.map
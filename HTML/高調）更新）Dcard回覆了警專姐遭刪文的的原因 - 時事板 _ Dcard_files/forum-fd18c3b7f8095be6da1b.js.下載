(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2568],{74490:function(e,t,n){"use strict";var r=n(50085),i=n(15198),o=n(60270),a=n(84564),s=n(14859);t.default=void 0;var u=s(n(2784)),c=s(n(49775)),l={400:"Bad Request",404:"This page could not be found",405:"Method Not Allowed",500:"Internal Server Error"};function d(e){var t=e.res,n=e.err;return{statusCode:t&&t.statusCode?t.statusCode:n?n.statusCode:404}}var f=function(e){o(n,e);var t=a(n);function n(){return r(this,n),t.apply(this,arguments)}return i(n,[{key:"render",value:function(){var e=this.props.statusCode,t=this.props.title||l[e]||"An unexpected error has occurred";return u.default.createElement("div",{style:p.error},u.default.createElement(c.default,null,u.default.createElement("title",null,e?"".concat(e,": ").concat(t):"Application error: a client-side exception has occurred")),u.default.createElement("div",null,u.default.createElement("style",{dangerouslySetInnerHTML:{__html:"body { margin: 0 }"}}),e?u.default.createElement("h1",{style:p.h1},e):null,u.default.createElement("div",{style:p.desc},u.default.createElement("h2",{style:p.h2},this.props.title||e?t:u.default.createElement(u.default.Fragment,null,"Application error: a client-side exception has occurred (",u.default.createElement("a",{href:"https://nextjs.org/docs/messages/client-side-exception-occurred"},"developer guidance"),")"),"."))))}}]),n}(u.default.Component);t.default=f,f.displayName="ErrorPage",f.getInitialProps=d,f.origGetInitialProps=d;var p={error:{color:"#000",background:"#fff",fontFamily:'-apple-system, BlinkMacSystemFont, Roboto, "Segoe UI", "Fira Sans", Avenir, "Helvetica Neue", "Lucida Grande", sans-serif',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},desc:{display:"inline-block",textAlign:"left",lineHeight:"49px",height:"49px",verticalAlign:"middle"},h1:{display:"inline-block",borderRight:"1px solid rgba(0, 0, 0,.3)",margin:0,marginRight:"20px",padding:"10px 23px 10px 0",fontSize:"24px",fontWeight:500,verticalAlign:"top"},h2:{fontSize:"14px",fontWeight:"normal",lineHeight:"inherit",margin:0,padding:0}}},29548:function(e,t,n){"use strict";n.d(t,{W:function(){return i},Z:function(){return p}});var r,i,o=n(52322),a=n(51119),s=n(34149),u=n(60865);!function(e){e[e.TEXT=0]="TEXT",e[e.RECT=1]="RECT"}(i||(i={}));var c=(r={},(0,a.Z)(r,i.TEXT,(0,s.iv)(["background-color:transparent;--selection-button-color:",";",""],(function(e){return e.theme.textDefault}),(function(e){return!e.disabled&&e.selected&&(0,s.iv)(["--selection-button-color:",";--selection-button-caret-fill:",";"],(function(e){return e.theme.mainLight}),(function(e){return e.theme.mainLight}))}))),(0,a.Z)(r,i.RECT,(0,s.iv)(["background-color:",";--selection-button-color:",";"],(function(e){return e.theme.uiField}),(function(e){return e.theme.newTextSemiDark}))),r);var l=s.ZP.div.withConfig({componentId:"e8dowx-0"})(["--selection-button-caret-fill:",";display:grid;align-items:center;grid-auto-flow:column;grid-column-gap:2px;grid-template-columns:1fr 18px;height:32px;padding:6px 4px 6px 8px;border:none;border-radius:8px;cursor:pointer;color:var(--selection-button-color);",";"," ",";"],(function(e){return e.theme.textDefault}),(function(e){return e.theme.subtitle2}),(function(e){return e.disabled&&(0,s.iv)(["cursor:not-allowed;& > *{opacity:0.2;}"])}),(function(e){return c[e.intent]})),d=s.ZP.div.withConfig({componentId:"e8dowx-1"})(["",";"],(function(e){return e.theme.ellipsis})),f=(0,s.ZP)(u.Z).attrs({size:18}).withConfig({componentId:"e8dowx-2"})(["fill:var(--selection-button-caret-fill);"]),p=function(e){var t=e.children,n=e.intent,r=void 0===n?i.RECT:n,a=e.disabled,s=void 0!==a&&a,u=e.selected,c=void 0!==u&&u,p=e.onClick;return(0,o.jsxs)(l,{disabled:s,intent:r,selected:c,onClick:s?void 0:p,children:[(0,o.jsx)(d,{children:t}),(0,o.jsx)(f,{})]})}},55055:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(52322),i=n(85354),o=n(2784),a=n(34149),s=n(82509),u=n(55049),c=n(59390),l=n(39854),d=n(92188),f=n(33314),p=a.ZP.div.withConfig({componentId:"sc-154msh6-0"})(["width:100%;z-index:2;position:sticky;top:0;transition:transform 0.2s ",";"],(function(e){return e.theme.bezier}));function m(e){var t=e.children,n=(0,o.useRef)(null),a=(0,c.Gc)(),m=(0,o.useState)(!1),h=m[0],v=m[1],g=(0,s.R)(n,{threshold:[0,1]}),x=(0,o.useMemo)((function(){return a.scroll$.pipe((0,l.p)(50),(0,d.U)((function(e){return e.top})),(0,f.G)())}),[a]);return(0,u.W)(x,(function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];v(r>n)})),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p,{style:{transform:"translateY(".concat(!g&&h?-100:0,"%)")},children:t}),(0,r.jsx)("div",{ref:n})]})}},57874:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(77162),i=n.n(r),o=n(56470),a=n(59394),s=n(52322),u=n(54530),c=n(64659),l=n(4730),d=n(75663),f=n(63409),p=n(51119),m=n(16304),h=n(2784);function v(e,t){if("function"===typeof e.getInitialProps)return e.getInitialProps(t)}function g(e){var t,n;return n=t=function(t){(0,d.Z)(r,t);var n=(0,f.Z)(r);function r(){return(0,c.Z)(this,r),n.apply(this,arguments)}return(0,l.Z)(r,[{key:"render",value:function(){var t=this.props,n=t.statusCode,r=(0,u.Z)(t,["statusCode"]);return n&&n>=400?e.isWebView?(0,s.jsx)(m.WebViewErrorPage,{statusCode:n}):(0,s.jsx)(m.default,{statusCode:n}):(0,s.jsx)(e,(0,a.Z)({},r))}}],[{key:"getInitialProps",value:function(){var t=(0,o.Z)(i().mark((function t(n){var r,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(e,n);case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:return o=t.t0,n.res&&o.statusCode&&(n.res.statusCode=o.statusCode),t.abrupt("return",(0,a.Z)({statusCode:null===(r=n.res)||void 0===r?void 0:r.statusCode},o));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),r}(h.Component),(0,p.Z)(t,"isWebView",e.isWebView),(0,p.Z)(t,"noUserInfo",e.noUserInfo),n}},3393:function(e,t,n){"use strict";var r=(0,n(25237).default)((function(){return n.e(7897).then(n.bind(n,67897))}),{ssr:!1,loadableGenerated:{webpack:function(){return[67897]},modules:["../modules/forum/components/dynamic/DynamicForumRulePage.tsx -> ~/modules/forum/components/ForumRule/ForumRulePage"]}});t.Z=r},16285:function(e,t,n){"use strict";n.d(t,{S:function(){return c},e:function(){return d}});var r=n(2784),i=n(34149),o=n(70314),a=n(55219),s=n(49814),u=n(48009);function c(e){var t=(0,s.Z)(a.Hu),n=(0,r.useContext)(i.Ni)||{},o=n.FORUM_SECTIONS_GAP,u=n.POST_LIST_SECTION_VERTICAL_PADDING,c=n.FORUM_HERO_IMAGE_HEIGHT,l=o+u+(void 0===c?0:c);(0,r.useEffect)((function(){t||("all"!==e&&(document.body.style.position="fixed",document.body.style.top="-".concat(l,"px"),setTimeout((function(){document.body.style.position="",document.body.style.top="",window.scrollTo(0,l)}))),document.body.focus())}),[e,t,l])}var l={sex:{to:(0,o.default)().publicRuntimeConfig.isEnvProd?"/goods/catalog/44a154ba-abb5-4c7b-bfe1-fc3688f362a0":"/goods/catalog/1acc91ab-5e03-45f3-9d5e-214797683577",text:[{id:"ec.sex_entrance_experiment_a.action"}]}};function d(e){var t=e.forumAlias;if((0,s.Z)(u.A1))return l[t]}},17378:function(e,t,n){"use strict";n.d(t,{Z:function(){return b},U:function(){return y}});var r=n(77162),i=n.n(r),o=n(51119),a=n(56470),s=n(59394),u=n(17620),c=n.n(u),l=n(73555),d=n(60910),f=n(76536),p=n(55219),m=n(14412),h=n(14495),v=n(31919);function g(e){return e.map((function(e,t){var n,r,i=[v.xH.all,v.xH.hot,v.xH.popular].includes(e.alias)&&0!==t,o=null!==(n=null===e||void 0===e||null===(r=e.uiPayload)||void 0===r?void 0:r.dropdownItems)&&void 0!==n?n:[];return(0,s.Z)((0,s.Z)((0,s.Z)({},e),e.name&&{nameMessage:{type:"string",message:e.name}}),{},{isHome:i},o.length>0&&{uiPayload:{dropdownItems:o.map((function(e){return(0,s.Z)((0,s.Z)((0,s.Z)({},e),e.name&&{nameMessage:{type:"string",message:e.name}}),{},{isHome:i&&[v.xH.hot,v.xH.popular].includes(e.alias)})}))}})}))}function x(e){return e&&e.all?(0,s.Z)((0,s.Z)({},e),{},{isDefault:!1,forum:(t=e.forum,t.map((function(e,t){return(0,s.Z)((0,s.Z)({},e),e.name&&{nameMessage:{type:"string",message:e.name}})}))),all:g(e.all)}):e;var t}var b=(0,l.FZ)(d.l.UPDATE_TAB,function(){var e=(0,a.Z)(i().mark((function e(t,n){var r,a,s,u,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.useV3Api,a=(0,m.jG)(t.getState()),!(s=(0,m.yn)(t.getState())).all||s.isDefault){e.next=5;break}return e.abrupt("return");case 5:return"/xlate/xlate/mercury/v3/posts/tabs","/mercury/v2/posts/tabs",u=r?"/xlate/xlate/mercury/v3/posts/tabs":"/mercury/v2/posts/tabs",l=r?a:c()(a,["lang"]),e.abrupt("return",f.Z.get(t,u,l).then(x).then((function(e){return(0,o.Z)({},(0,h.CN)(a),e)})));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),y=(0,l.FZ)(d.l.UPDATE_TAB,function(){var e=(0,a.Z)(i().mark((function e(t,n){var r,a,s,u,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.uid,a=t.getState(),!(0,m.yn)(a).persona){e.next=5;break}return e.abrupt("return");case 5:return s=(0,p.j)(a),u=(0,m.jG)(a),e.next=9,f.Z.get(t,"/xlate/xlate/mercury/v3/personae/tabs/".concat(r),{lang:s});case 9:return c=e.sent,e.abrupt("return",(0,o.Z)({},(0,h.CN)(u),{persona:c.persona}));case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},16304:function(e,t,n){"use strict";n.r(t),n.d(t,{WebViewErrorPage:function(){return E}});var r=n(77162),i=n.n(r),o=n(54530),a=n(56470),s=n(52322),u=n(59394),c=n(70689),l=(n(2784),n(34149)),d=n(86761),f=n(36156),p=n(80230),m=n(74784),h=n(96562),v=n(77682),g=n(39780),x=n.n(g),b=n(23490),y=n.n(b),Z=n(69300),w=n(77106),P=n(49814),I=n(43248),k=n(48203),C=n(83112),j=l.ZP.div.withConfig({componentId:"sc-1f5exq5-0"})(["background-color:",";position:relative;height:100vh;width:100%;padding-top:","px;display:flex;align-items:center;justify-content:center;"],(function(e){return e.theme.whiteBg}),(function(e){return e.theme.isMobile?0:e.theme.HEADER_HEIGHT})),E=function(e){var t,n=(0,C.Z)().formatMessage,r=e.statusCode,i=void 0===r?500:r,o=e.hasGetInitialPropsRun,a=e.err,c=e.memberId,l=(0,P.Z)((function(e){return e.app.data.isFirstLoad})),d=(0,P.Z)(k.np),f=(0,I.Z)();if(!o&&a&&404!==i){var g=c?"".concat(c):null===d||void 0===d?void 0:d.id;v.Tb(a,(0,u.Z)({},g&&{user:{id:g}}))}var b=null===(t=f.asPath)||void 0===t?void 0:t.startsWith("/goods/");return(0,s.jsxs)(j,{children:[(0,s.jsx)(h.Z,{type:h.f.error,ctx:e}),(0,s.jsx)(Z.Z,{image:404===i?y():x(),title:"".concat(i),description:n({id:404===i?"error.page_not_found.description":"error.page_error.description"}),children:l?(0,s.jsx)(w.Z,{to:b?"/goods":"/f",children:(0,s.jsx)(p.z,{intent:m.wg.Primary,children:n({id:b?"error.see_more_ec_goods.action":"error.see_more_post.action"})})}):(0,s.jsx)(p.z,{onClick:f.back,intent:m.wg.Primary,children:n({id:"general.go_back.action"})})})]})};E.getInitialProps=function(){var e=(0,a.Z)(i().mark((function e(t){var n,r,a,s,l,d,f,p,m,h,g;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.res,a=t.err,s=t.asPath,l=(0,o.Z)(t,["res","err","asPath"]),e.next=3,c.default.getInitialProps((0,u.Z)({res:r,err:a},l));case 3:if((d=e.sent).hasGetInitialPropsRun=!0,404!==(null===r||void 0===r?void 0:r.statusCode)){e.next=7;break}return e.abrupt("return",{statusCode:404});case 7:if(!(p=null===(n=l.appGetInitialPropsPromiseSubscribers)||void 0===n?void 0:n.getMe)){e.next=27;break}return e.prev=9,e.next=12,p;case 12:if(e.t1=m=e.sent,e.t0=null===e.t1,e.t0){e.next=16;break}e.t0=void 0===m;case 16:if(!e.t0){e.next=20;break}e.t2=void 0,e.next=21;break;case 20:e.t2=null===(h=m.payload)||void 0===h?void 0:h.id;case 21:f=e.t2,d.memberId=f,e.next=27;break;case 25:e.prev=25,e.t3=e.catch(9);case 27:if(!a){e.next=33;break}return g=f?"".concat(f):void 0,v.Tb(a,(0,u.Z)({},g&&{user:{id:g}})),e.next=32,v.yl(2e3);case 32:return e.abrupt("return",d);case 33:return v.Tb(new Error("_error.js getInitialProps missing data at path: ".concat(s))),e.next=36,v.yl(2e3);case 36:return e.abrupt("return",d);case 37:case"end":return e.stop()}}),e,null,[[9,25]])})));return function(t){return e.apply(this,arguments)}}(),t.default=(0,d.X)(f.Z)(E)},49531:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return rt}});var r=n(77162),i=n.n(r),o=n(85354),a=n(11720),s=n(52322),u=n(56470),c=n(25237),l=n(34149),d=n(28817),f=n(86761),p=n(20859),m=n(2784),h=n(66811);const v={length:0,clear(){},getItem:e=>null,key:e=>null,removeItem(e){},setItem(e,t){}};function g(e,t,n={}){const r=(0,m.useMemo)((()=>function(e){if("undefined"!==typeof window)try{const t=window[e],n=`tryToAccessBrowserStorage ${e} test`;return t.setItem(n,"5566"),t.getItem(n),t.removeItem(n),t}catch(t){console.warn(`util: tryToAccessBrowserStorage failed to access browser ${e} storage.`)}}(n.session?"sessionStorage":"localStorage")||v),[n.session]),i=(0,m.useRef)(n);(0,m.useEffect)((()=>{i.current=n}),[n]);const[o,a]=(0,m.useState)((()=>{try{const n=r.getItem(e),i=n?JSON.parse(n):null;if(function(e){return"function"===typeof e}(t)){const n=t(i);return r.setItem(e,JSON.stringify(n)),n}if(i)return i;t&&r.setItem(e,JSON.stringify(t))}catch(n){console.warn(n)}return t}));return(0,m.useEffect)((()=>{try{const t=JSON.stringify(o);"undefined"!==typeof t&&r.setItem(e,t)}catch(t){console.warn(t)}}),[e,r,o]),(0,m.useEffect)((()=>{const t=i.current;return()=>{t.cleanup&&r.removeItem(e)}}),[e,r]),[o,a]}var x=n(55219),b=n(99898),y=n(94067),Z=n(86484),w=n(56267),P=n(49814);var I=n(99069),k=n(57874),C=n(97488),j=n(97729),E=n(77106),T=n(55055),_=n(89039),S=n(58875),H=n(59394),A=n(43248),R=n(17857),O=n(31919),N=n(81730),M=n(83558),G=n(14412),F=n(19126);function L(e){switch(e.alias){case O.xH.hot:case O.xH.popular:return(0,s.jsx)(N.Z,{});case O.xH.latest:return(0,s.jsx)(M.Z,{})}}var D=n(34461),K=n(83112),q=n(47317),z=n(29548),B=l.ZP.div.withConfig({componentId:"irx12-0"})(["display:flex;justify-content:center;align-items:center;align-self:stretch;white-space:nowrap;"]),W=l.ZP.div.withConfig({componentId:"irx12-1"})(["color:",";padding:0 10px;"],(function(e){return e.theme.textDefault})),Q=(0,l.ZP)(z.Z).withConfig({componentId:"irx12-2"})(["margin-top:10px;"]),U=l.ZP.div.withConfig({componentId:"irx12-3"})([""]);function V(e){var t,n=e.items,r=(0,K.Z)().formatMessage,i=(0,q.i)(),o=(t=n).find((function(e){return e.active}))||t[0];if(!o)return null;var a=n.map((function(e){return{active:e.active,to:e.url,icon:L(e),label:i(e.nameMessage)}})),u=(0,s.jsx)(Q,{intent:z.W.RECT,children:i(o.nameMessage)});return(0,s.jsxs)(B,{children:[(0,s.jsx)(W,{children:r({id:"post.sort.title"})}),(0,s.jsx)(U,{children:(0,s.jsx)(D.Z,{placement:"bottom-end",items:a,trigger:u,strategy:"fixed"})})]})}var X=[O.RH.legacy,O.RH.paging,O.RH.rule,O.RH.globalPaging,O.RH.dropdown],J=l.ZP.div.withConfig({componentId:"sc-1nqrhll-0"})(["display:flex;align-items:center;height:","px;"],(function(e){return e.theme.POST_LIST_TABS_HEIGHT})),$=l.ZP.div.withConfig({componentId:"sc-1nqrhll-1"})(["display:flex;height:100%;flex-grow:",";& > *{height:100%;width:100%;}"],(function(e){return e.theme.isMobile?1:0})),Y=l.ZP.div.withConfig({componentId:"sc-1nqrhll-2"})(["display:flex;height:100%;flex-grow:1;justify-content:flex-end;"]);function ee(e){var t,n=e.baseUrl,r=e.tabs,i=e.query,o=(0,P.Z)(x.Hu),a=(0,A.Z)().asPath,u=(0,m.useMemo)((function(){return r.map(function(e,t,n){var r=(0,F.stringify)(t);return function t(i){var o,a,s=(0,G.V5)(i),u=(0,F.stringify)(s),c=(null!==(o=null===i||void 0===i||null===(a=i.uiPayload)||void 0===a?void 0:a.dropdownItems)&&void 0!==o?o:[]).map(t),l=(0,G.C7)(n)?i.listType===O.RH.rule:i.listType!==O.RH.rule&&(r===u||c.some((function(e){return e.active})));return(0,H.Z)((0,H.Z)({name:""},i),{},{active:l,url:i.listType===O.RH.rule?"".concat(e,"/rule"):"".concat(e).concat(u?"?".concat(u):""),uiPayload:{dropdownItems:c}})}}(n,i,a)).filter((function(e){return X.includes(e.listType)}))}),[a,n,i,r]),c=null===(t=u.find((function(e){return e.active})))||void 0===t?void 0:t.name,l=!o&&u.find((function(e){return e.uiType===O.jE.dropdown&&e.active}));return(0,s.jsxs)(J,{children:[(0,s.jsx)($,{children:(0,s.jsx)(R.ZP,(0,H.Z)({activeName:c,tabs:u,size:R.K0.TALL},o&&R.vQ.mobileTabs))}),l&&(0,s.jsx)(Y,{children:(0,s.jsx)(V,{items:l.uiPayload.dropdownItems})})]})}var te=n(74784),ne=(0,c.default)((function(){return n.e(3133).then(n.bind(n,73133))}),{loadableGenerated:{webpack:function(){return[73133]},modules:["../modules/forum/components/PostListHeader/PostListHeader.tsx -> ./MobileForumInfo"]}}),re=l.ZP.div.withConfig({componentId:"sc-1iit2li-0"})(["display:flex;flex-direction:column;align-items:flex-start;background:",";"],(function(e){return e.theme.containerBg})),ie=(0,l.ZP)(re).withConfig({componentId:"sc-1iit2li-1"})(["position:sticky;top:","px;padding:",";z-index:10;border-bottom:1px solid ",";border-radius:",";"],(function(e){return e.theme.HEADER_HEIGHT}),(function(e){return"".concat(e.theme.POST_LIST_HEADER_PADDING_TOP,"px ").concat(e.theme.POST_LIST_SECTION_HORIZONTAL_PADDING+e.theme.POST_LIST_SECTION_HORIZONTAL_MARGIN,"px 0")}),(function(e){return e.theme.uiSeparator}),(function(e){return e.borderRadius?"4px 4px 0 0":""})),oe=(0,l.ZP)(re).withConfig({componentId:"sc-1iit2li-2"})([""]),ae=l.ZP.div.withConfig({componentId:"sc-1iit2li-3"})(["width:100%;background:",";border-bottom:1px solid ",";"],(function(e){return e.theme.containerBg}),(function(e){return e.theme.uiSeparator})),se=l.ZP.div.withConfig({componentId:"sc-1iit2li-4"})(["display:flex;align-items:center;height:","px;padding:",";width:100%;"],(function(e){return e.theme.POST_LIST_HEADER_HEIGHT}),(function(e){return e.theme.isMobile?"16px":0})),ue=l.ZP.h1.withConfig({componentId:"sc-1iit2li-5"})(["flex-grow:1;",";color:",";font-size:30px;font-weight:500;margin-left:10px;& > a{color:inherit;}"],(function(e){return e.theme.ellipsis}),(function(e){return e.theme.black})),ce=l.ZP.div.withConfig({componentId:"sc-1iit2li-6"})(["width:100%;overflow:hidden;"]),le=l.ZP.div.withConfig({componentId:"sc-1iit2li-7"})(["width:100%;z-index:1;"]);var de=function(e){var t,n,r,i=e.forum,o=e.tabs,a=e.query,u=(0,P.Z)(x.Hu),c=null!==(t=null===i||void 0===i?void 0:i.url)&&void 0!==t?t:"/f",l=i&&(0,s.jsxs)(s.Fragment,{children:[(null===(n=i.logo)||void 0===n?void 0:n.url)&&(0,s.jsx)(j.default,{children:(0,s.jsx)("link",{rel:"preload",as:"image",href:i.logo.url})}),(0,s.jsxs)(se,{children:[(0,s.jsx)(S.Z,{size:40,forum:i}),(0,s.jsx)(ue,{children:(0,s.jsx)(E.Z,{to:c,children:i.name})}),(0,s.jsx)(_.ZP,{forum:i,size:te.qE.Small,position:"forum",showNotifyButton:!0,showTutorial:!0})]})]}),d=(0,s.jsx)(le,{children:(0,s.jsx)(ee,{baseUrl:c,tabs:o,query:a})});return u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(oe,{children:[l,(0,s.jsx)(ce,{children:i&&(0,s.jsx)(ne,{forum:i})})]}),(0,s.jsx)(T.Z,{children:(0,s.jsx)(ae,{children:d})})]}):(0,s.jsxs)(ie,{borderRadius:!(null!==i&&void 0!==i&&null!==(r=i.heroImage)&&void 0!==r&&r.url),children:[l,d]})},fe=n(76734),pe=n(16285),me=n(27753),he=n(96562),ve=n(90549),ge=n(79237),xe=n(17378),be=n(76253),ye=n(13933),Ze=n(98167);function we(e){var t=(0,h.I0)();(0,m.useEffect)((function(){t((0,ye.R)((0,Ze.bA)(e)))}),[t,e])}var Pe=n(75882),Ie=n(97938),ke=n(808);function Ce(e){var t=(0,h.I0)();(0,m.useEffect)((function(){var n=!1;function r(){return(r=(0,u.Z)(i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ke.t.waitForConfig();case 2:if(!n){r.next=4;break}return r.abrupt("return");case 4:(0,Ie.tQ)()&&t((0,Pe.PL)((0,Ie.QR)(e)));case 5:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),function(){n=!0}}),[t,e])}var je=n(64330),Ee=n(714),Te=n(33035),_e=n(3548),Se=n(73555),He=n(76536),Ae=n(60910),Re=n(14495),Oe=n(69176),Ne=(0,Se.FZ)(Ae.l.LIST_KBK_POST,(function(e,t){var n=t.id,r=e.getState(),i=(0,Oe.Yq)(r,{kbk:!0});return i.length?i:He.Z.get(e,"/kbk/v0/messages/".concat(n,"/posts")).then((function(e){return[e.message,e.official]}))}),(function(){return{key:(0,Re.CN)({kbk:!0})}})),Me=n(39496),Ge={match:function(e,t){var n=e.isServer,r=e.store,o=t.forumAlias,a=t.tabQuery,s=t.query;return function(){return c.apply(this,arguments)}();function c(){return(c=(0,u.Z)(i().mark((function e(){var t,u,c,l,d,f,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,x.cm)(r.getState()),u=(0,Oe.yu)((0,H.Z)((0,H.Z)({},a),{},{forumAlias:o})),c=!!u.pessoal&&!t,l=(0,Ze.bA)(u),d=function(){var e=u.pessoal,t=u.latest;return e?Me.H.following:t?Me.H.latest:Me.H.hot}(),f=[],(p=(0,_e.S)(s))&&"all"===o&&f.push(r.dispatch(Ne({id:p}))),c||(f.push(r.dispatch((0,je.uj)(u))),f.push(r.dispatch((0,ye.R)(l)))),!n){e.next=12;break}return e.next=12,Promise.all(f);case 12:return e.abrupt("return",{paginationOptions:u,isPessoalButNotLoggedin:c,sourceKey:d});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},render:function(e){return(0,s.jsx)(Fe,(0,H.Z)({},e))}},Fe=function(e){var t=e.paginationOptions,n=e.isPessoalButNotLoggedin,r=(0,h.I0)(),i=(0,m.useCallback)((function(e){r((0,je.uj)((0,H.Z)((0,H.Z)({},t),{},{before:e.index[e.index.length-1]})))}),[r,t]);return we(t),Ce(t),n?(0,s.jsx)(Te.Z,{}):(0,s.jsx)(Ee.Z,{paginationOptions:t,onLoadMore:i})},Le={match:function(e,t){var n=e.isServer,r=e.store,o=t.forumAlias,a=t.tabQuery,s=(0,Oe.yu)((0,H.Z)((0,H.Z)({},a),{},{forumAlias:o}));if(a.listType!==O.RH.paging)return null;if(!s.listKey)return null;var c=s.listKey;return function(){return l.apply(this,arguments)}();function l(){return(l=(0,u.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[r.dispatch((0,je.$W)({listKey:c})),r.dispatch((0,ye.R)((0,Ze.bA)(s)))],!n){e.next=4;break}return e.next=4,Promise.all(t);case 4:return e.abrupt("return",{paginationOptions:s,sourceKey:Me.H.athenaHK,sourceDetail:"all"});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},render:function(e){return(0,s.jsx)(De,(0,H.Z)({},e))}},De=function(e){var t=e.paginationOptions,n=(0,h.I0)(),r=t.listKey,i=(0,m.useCallback)((function(){r&&n((0,je.ly)({listKey:r}))}),[n,r]);return we(t),Ce(t),(0,s.jsx)(Ee.Z,{paginationOptions:t,onLoadMore:i})};function Ke(e){var t=e.tabs,n=e.currentTabQuery,r=e.asPath,i=(0,F.stringify)(n);return t.reduce((function(e,t){var o,a;return e||(function(e){if((0,G.C7)(r))return e.listType===O.RH.rule;if(e.listType===O.RH.rule)return!1;var t=(0,G.V5)(e),n=(0,F.stringify)(t);return i===n}(t)?t:Ke({tabs:null!==(o=null===t||void 0===t||null===(a=t.uiPayload)||void 0===a?void 0:a.dropdownItems)&&void 0!==o?o:[],currentTabQuery:n,asPath:r}))}),void 0)}var qe={match:function(e,t){var n=e.isServer,r=e.store,o=e.asPath,a=void 0===o?"":o,s=t.forumAlias,c=t.tabQuery,l=t.tabs,d=(0,Oe.yu)((0,H.Z)((0,H.Z)({},c),{},{forumAlias:s}));if(c.listType!==O.RH.globalPaging)return null;if(!d.listKey)return null;var f=d.listKey;return function(){return p.apply(this,arguments)}();function p(){return(p=(0,u.Z)(i().mark((function e(){var t,o,u,p,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Ke({tabs:l,currentTabQuery:c,asPath:a}),o=(null===t||void 0===t?void 0:t.alias)===O.xH.latest,u={forumAlias:s,latest:o},p=[r.dispatch((0,je.er)({listKey:f})),r.dispatch((0,ye.R)((0,Ze.bA)(u)))],m=null!==t&&void 0!==t&&t.bilanxPayload?{sourceKey:t.bilanxPayload.list,sourceDetail:t.bilanxPayload.listDetail}:{sourceKey:o?Me.H.latest:Me.H.hot,sourceDetail:s},!n){e.next=8;break}return e.next=8,Promise.all(p);case 8:return e.abrupt("return",(0,H.Z)({paginationOptions:d,paginationOptionsForExtensionAndHawkeye:u},m));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},render:function(e){return(0,s.jsx)(ze,(0,H.Z)({},e))}},ze=function(e){var t=e.paginationOptions,n=e.paginationOptionsForExtensionAndHawkeye,r=(0,h.I0)(),i=t.listKey,o=(0,m.useCallback)((function(){i&&r((0,je.vx)({listKey:i}))}),[r,i]);return we(n),Ce(n),(0,s.jsx)(Ee.Z,{paginationOptions:t,onLoadMore:o})},Be=n(3393),We={paging:Le,globalPaging:qe,rule:{match:function(e){var t=e.asPath,n=void 0===t?"":t,r=e.query;return(0,G.C7)(n)?function(){return o.apply(this,arguments)}():null;function o(){return(o=(0,u.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{forumAlias:(0,fe.Ox)(r)});case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},render:function(e){var t=e.forumAlias;return(0,s.jsx)(Be.Z,{alias:t})}},legacy:Ge};var Qe=function(e,t){var n;for(n in We){var r=We[n].match(e,t);if(r)return o(r)}throw new Error("should never come here!");function o(e){return a.apply(this,arguments)}function a(){return(a=(0,u.Z)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return r=e.sent,e.abrupt("return",{pager:n,options:r});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}};function Ue(e){var t=function(e){return[We[e.pager],e.options]}(e),n=(0,o.Z)(t,2),r=n[0],i=n[1];return r.render(i)}var Ve=n(11200),Xe=n(5431),Je=(0,c.default)((function(){return n.e(4698).then(n.bind(n,24698))}),{loadableGenerated:{webpack:function(){return[24698]},modules:["forum.tsx -> ~/modules/forum/components/HeroImage"]}}),$e=(0,c.default)((function(){return n.e(5212).then(n.bind(n,5212))}),{ssr:!1,loadableGenerated:{webpack:function(){return[5212]},modules:["forum.tsx -> ~/modules/common/components/RegulationConfirmRegister"]}}),Ye=l.ZP.div.withConfig({componentId:"sc-1kb03aj-0"})(["border-radius:4px 4px 0 0;"]);function et(e,t,n){return tt.apply(this,arguments)}function tt(){return(tt=(0,u.Z)(i().mark((function e(t,n,r){var o,a,s,u,c,l,f,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&"all"!==n){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.dispatch((0,C.iC)({alias:n}));case 4:if(!(o=e.sent).ok){e.next=7;break}return e.abrupt("return");case 7:if(!r){e.next=9;break}return e.abrupt("return",null!==(a=null===o||void 0===o||null===(s=o.meta)||void 0===s||null===(u=s.rawError)||void 0===u?void 0:u.status)&&void 0!==a?a:500);case 9:c=o.payload,l=c.error,f=c.message,m=void 0===f?"":f,be.Z.show({message:[{id:l===d.jK.forumNotFound?"forum.forum_not_found.message":"error.default_detail.message_format"},{error:m}],intent:p.SE.danger});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nt=function(e){var t,n=e.envelope,r=e.forumAlias,i=void 0===r?"all":r,a=e.tabQuery,u=void 0===a?{}:a,c=e.tabs,l=e.kbkPosts,d=n.options,f=d.sourceKey,p=d.sourceDetail,v=(0,P.Z)((function(e){return(0,me.sh)(e,i)}));return function(e){var t=g("createIdentityShown",!1),n=(0,o.Z)(t,2),r=n[0],i=n[1],a=(0,P.Z)((function(t){return e?(0,Z.KN)(t,e):void 0})),s=(0,P.Z)(x.cm),u=(0,P.Z)(x.Hu),c=(0,h.I0)(),l=!(null!==a&&void 0!==a&&a.loading),d=s&&!u&&!r&&e&&w.gE.includes(e);(0,m.useEffect)((function(){d&&l&&c((0,y.hO)({forumAlias:e}))}),[e,d,l,c]),(0,m.useEffect)((function(){var e;d&&null!==a&&void 0!==a&&a.fetched&&0===(null===a||void 0===a||null===(e=a.identities)||void 0===e?void 0:e.length)&&(c(b.M.actions.push({type:b.G.CreateIdentity})),i(!0))}),[d,c,i,a])}(i),(0,pe.S)(i),(0,ve.IL)({key:f,detail:null!==(t=null!==p&&void 0!==p?p:null===v||void 0===v?void 0:v.id)&&void 0!==t?t:"all"}),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)($e,{nsfw:null===v||void 0===v?void 0:v.nsfw}),(0,s.jsx)(he.Z,{type:he.f.forum,ctx:{forum:v,kbkPosts:l}}),v&&(0,s.jsx)(Je,{forum:v}),(0,s.jsxs)(Ye,{children:[(0,s.jsx)(de,{forum:v,tabs:c,query:u}),Ue(n)]})]})};nt.getInitialProps=function(){var e=(0,u.Z)(i().mark((function e(t){var n,r,s,u,c,l,d,f,p,m,h,v,g,x,b,y,Z,w,P,I;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.isServer,r=t.query,s=t.store,u=t.appGetInitialPropsPromiseSubscribers,c=t.isMobile,l=s.getState(),d=(0,ge.GW)(l),e.next=5,u.getMe;case 5:return e.next=7,s.dispatch((0,xe.Z)({useV3Api:"JP"===d}));case 7:if(f=(0,fe.Ox)(r),p=s.getState(),m=(0,G.Kv)(p,r)||[],h=(0,G.fc)(p,r),g=et(s,f,n),!n){e.next=16;break}return e.next=15,g;case 15:v=e.sent;case 16:return x=Qe(t,{forumAlias:f,tabQuery:h,tabs:m,query:r}),b=[x],"sex"===f&&(y=s.dispatch((0,Ve.s)((0,a.Z)(c?[Xe.y.ECSexForumEntranceExperiment]:[]))),b.push(y)),e.next=21,Promise.all(b);case 21:return Z=e.sent,w=(0,o.Z)(Z,1),P=w[0],I=(0,Oe.Yq)(s.getState(),{kbk:!0}),e.abrupt("return",{envelope:P,forumAlias:f,statusCode:v,tabQuery:h,tabs:m,query:r,kbkPosts:I});case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var rt=(0,k.Z)((0,f.X)(I.Z)(nt))},54238:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/forum",function(){return n(49531)}])},70689:function(e,t,n){e.exports=n(74490)},23490:function(e){e.exports="/_next/static/media/notFound-451ddb8af0356a65496217b7d3a7460d.png"},81730:function(e,t,n){"use strict";var r=n(2784),i=(0,n(86401).F)({viewBox:"0 0 16 16"},[r.createElement("path",{d:"M7.8 13.39a2.23 2.23 0 01-2.27-2.21A2.2 2.2 0 017.51 9a5.46 5.46 0 003.25-1.82 10 10 0 01.41 2.82 3.37 3.37 0 01-3.37 3.39zM9.05.5a14.83 14.83 0 01.53 3.38 2.44 2.44 0 01-2.4 2.62 2.57 2.57 0 01-2.56-2.62v-.26a9.71 9.71 0 00-2.25 6.25 5.63 5.63 0 0011.26 0A12 12 0 009.05.5z"})]);t.Z=i}},function(e){e.O(0,[9351,3021,2659,8096,7606,3584,6118,4990,186,1120,6382,714,9774,2888,179],(function(){return t=54238,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=forum-fd18c3b7f8095be6da1b.js.map